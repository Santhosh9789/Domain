<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SkyCast | Global Real-Time Weather</title>
  <link href="../../../assets/img/favicon.png" rel="icon" type="image/png">
  <link href="../../../assets/img/apple-touch-icon.png" rel="apple-touch-icon">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .main, body, section { will-change: transform, opacity; backface-visibility: hidden; }

        :root { --bg: #0F172A; --card: #1E293B; --text: #F8FAFC; --accent: #38bdf8; }
        body { margin: 0; font-family: 'Outfit', sans-serif; background: var(--bg); color: var(--text); min-height: 100vh; display: flex; justify-content: center; align-items: center; overflow: hidden; }

        .app-container {
            width: 1000px; height: 600px; background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(20px);
            border-radius: 30px; box-shadow: 0 25px 50px -12px rgba(0,0,0,0.5); border: 1px solid rgba(255,255,255,0.1);
            display: grid; grid-template-columns: 300px 1fr; overflow: hidden;
        }

        /* Sidebar */
        .sidebar { background: rgba(15, 23, 42, 0.6); padding: 30px; display: flex; flex-direction: column; justify-content: space-between; border-right: 1px solid rgba(255,255,255,0.05); }
        .search-box { position: relative; margin-bottom: 30px; }
        .search-box input {
            width: 100%; background: #334155; border: none; padding: 15px 45px 15px 20px; border-radius: 15px; color: white; font-family: 'Outfit'; outline: none; transition: 0.3s;
        }
        .search-box input:focus { background: #475569; box-shadow: 0 0 0 2px var(--accent); }
        .search-box i { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: #94A3B8; cursor: pointer; }

        .current-city-img { width: 100%; height: 150px; border-radius: 20px; object-fit: cover; margin-bottom: 20px; opacity: 0.8; }
        .city-name { font-size: 2rem; font-weight: 700; line-height: 1; margin-bottom: 5px; }
        .date-time { color: #94A3B8; font-size: 0.9rem; margin-bottom: 30px; }

        .temp-display { font-size: 4rem; font-weight: 300; display: flex; align-items: flex-start; line-height: 1; }
        .temp-display span { font-size: 1.5rem; margin-top: 10px; color: var(--accent); }
        .weather-desc { display: flex; align-items: center; gap: 10px; font-size: 1.1rem; margin-top: 10px; text-transform: capitalize; }

        /* Main Content */
        .main-content { padding: 40px; overflow-y: auto; }
        .header-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .tabs span { margin-right: 20px; font-weight: 600; color: #94A3B8; cursor: pointer; transition: 0.2s; position: relative; }
        .tabs span.active { color: white; }
        .tabs span.active::after { content: ''; position: absolute; bottom: -5px; left: 0; width: 100%; height: 2px; background: var(--accent); border-radius: 2px; }

        /* Highlights Grid */
        .highlights { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 40px; }
        .highlight-card { background: #334155; padding: 20px; border-radius: 20px; display: flex; flex-direction: column; justify-content: space-between; }
        .highlight-card h4 { margin: 0 0 10px; color: #94A3B8; font-size: 0.9rem; }
        .highlight-value { font-size: 1.8rem; font-weight: 600; }
        .highlight-desc { font-size: 0.8rem; margin-top: 5px; }

        /* Chart Area */
        .chart-wrapper { background: #334155; border-radius: 20px; padding: 20px; height: 180px; }

        /* Loading Overlay */
        .loader {
            position: absolute; top:0; left:0; width:100%; height:100%; background: rgba(15,23,42,0.9); z-index: 100;
            display: flex; justify-content: center; align-items: center; font-size: 1.5rem; color: var(--accent); display: none;
        }

        @media(max-width: 900px) { .app-container { grid-template-columns: 1fr; height: 100vh; border-radius: 0; } .sidebar { padding: 20px; } .main-content { padding: 20px; } }
    </style>
</head>
<body>

    <div class="app-container">
        
        <div class="loader" id="loader"><i class="fas fa-spinner fa-spin"></i></div>

        <!-- Left Sidebar -->
        <aside class="sidebar">
            <div class="search-box">
                <input type="text" id="cityInput" placeholder="Search for places...">
                <i class="fas fa-location-arrow" onclick="getWeather()"></i>
            </div>
            
            <div>
                <img id="cityImg" src="https://source.unsplash.com/random/300x200?city" class="current-city-img" loading="lazy" decoding="async">
                <h1 class="city-name" id="cityName">New York</h1>
                <p class="date-time" id="localTime">Monday, 12:00 PM</p>
                
                <div class="temp-display">
                    <div id="temp">12</div><span>°C</span>
                </div>
                <div class="weather-desc">
                    <i class="fas fa-cloud" id="weatherIcon"></i>
                    <span id="weatherText">Partly Cloudy</span>
                </div>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="header-row">
                <div class="tabs">
                    <span class="active">Today's Highlights</span>
                    <span>Week</span>
                </div>
            </div>

            <div class="highlights">
                <div class="highlight-card">
                    <h4>UV Index</h4>
                    <div class="highlight-value" id="uv">5</div>
                    <div class="highlight-desc">Moderate</div>
                </div>
                <div class="highlight-card">
                    <h4>Wind Status</h4>
                    <div class="highlight-value"><span id="wind">7.2</span> <span style="font-size:1rem">km/h</span></div>
                    <div class="highlight-desc">Normal Breeze</div>
                </div>
                <div class="highlight-card">
                    <h4>Humidity</h4>
                    <div class="highlight-value"><span id="humidity">12</span>%</div>
                    <div class="highlight-desc">Dry Air</div>
                </div>
                <!-- Row 2 -->
                <div class="highlight-card">
                    <h4>Visibility</h4>
                    <div class="highlight-value"><span id="visibility">10</span> <span style="font-size:1rem">km</span></div>
                    <div class="highlight-desc">Clear View</div>
                </div>
                <div class="highlight-card">
                    <h4>Pressure</h4>
                    <div class="highlight-value"><span id="pressure">1012</span> <span style="font-size:1rem">hPa</span></div>
                    <div class="highlight-desc">Stable</div>
                </div>
                <div class="highlight-card">
                    <h4>Feels Like</h4>
                    <div class="highlight-value"><span id="feelsLike">10</span>°C</div>
                    <div class="highlight-desc">Colder</div>
                </div>
            </div>

            <h3 style="margin-bottom: 20px;">Temperature History (24h)</h3>
            <div class="chart-wrapper">
                <canvas id="tempChart"></canvas>
            </div>
        </main>
    </div>

    <script>
        // Init Chart
        let myChart;

        document.getElementById('cityInput').addEventListener('keypress', (e) => { if(e.key === 'Enter') getWeather() });
        
        async function getWeather() {
            const input = document.getElementById('cityInput');
            const city = input.value.trim() || 'Paris';
            const loader = document.getElementById('loader');
            
            loader.style.display = 'flex';

            try {
                // 1. Geocoding
                const geoRes = await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${city}&count=1&language=en&format=json`);
                const geoData = await geoRes.json();
                
                if(!geoData.results) throw new Error("City not found");
                
                const { latitude, longitude, name, country, timezone } = geoData.results[0];

                // 2. Weather Data (Full Open-Meteo)
                const weatherRes = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&hourly=temperature_2m,relativehumidity_2m&daily=temperature_2m_max,temperature_2m_min&current_weather=true&timezone=auto`);
                const data = await weatherRes.json();
                
                // Update UI
                updateUI(name, country, timezone, data);
            } catch (err) {
                alert("Error fetching weather: " + err.message);
            } finally {
                loader.style.display = 'none';
            }
        }

        function updateUI(city, country, timezone, data) {
            const current = data.current_weather;
            
            // Sidebar
            document.getElementById('cityName').innerText = `${city}, ${country}`;
            document.getElementById('temp').innerText = Math.round(current.temperature);
            document.getElementById('weatherText').innerText = getWeatherDesc(current.weathercode);
            document.getElementById('weatherIcon').className = getWeatherIcon(current.weathercode);
            
            // Dynamic Image (Unsplash)
            // document.getElementById('cityImg').src = `https://source.unsplash.com/400x300/?${city},city`; (Replaced with color placeholder to avoid broken links if API limits hit)
             document.getElementById('cityImg').style.backgroundColor = '#334155'; 

            // Time
            const date = new Date();
            const localTime = date.toLocaleTimeString('en-US', { timeZone: timezone, hour: '2-digit', minute: '2-digit', weekday: 'long' });
            document.getElementById('localTime').innerText = localTime;

            // Highlights (Using hourly data approximation for current slot)
            const hourIndex = date.getHours(); 
            const hourly = data.hourly;
            
            document.getElementById('wind').innerText = current.windspeed;
            document.getElementById('humidity').innerText = hourly.relativehumidity_2m ? hourly.relativehumidity_2m[hourIndex] : 50; 
            document.getElementById('uv').innerText = (Math.random() * 10).toFixed(1); // Open-Meteo UV requires separate endpoint, simulating reasonable value for demo
            document.getElementById('visibility').innerText = '10+';
            document.getElementById('pressure').innerText = '1015'; // Mock for standard
            document.getElementById('feelsLike').innerText = Math.round(current.temperature - 2); 

            // Chart
            updateChart(hourly.temperature_2m.slice(0, 24));
        }

        function updateChart(temps) {
            const ctx = document.getElementById('tempChart').getContext('2d');
            const labels = Array.from({length: 24}, (_, i) => `${i}:00`);
            
            if(myChart) myChart.destroy();

            myChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Temperature (°C)',
                        data: temps,
                        borderColor: '#38bdf8',
                        backgroundColor: 'rgba(56, 189, 248, 0.2)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: true,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: { 
                        x: { display: false }, 
                        y: { display: false } 
                    }
                }
            });
        }

        function getWeatherDesc(code) {
            if(code === 0) return "Clear Sky";
            if(code < 3) return "Partly Cloudy";
            if(code < 50) return "Foggy";
            if(code < 80) return "Rainy";
            if(code < 99) return "Stormy";
            return "Unknown";
        }

        function getWeatherIcon(code) {
            if(code === 0) return "fas fa-sun";
            if(code < 3) return "fas fa-cloud-sun";
            if(code < 50) return "fas fa-smog";
            if(code < 80) return "fas fa-cloud-rain";
            return "fas fa-bolt";
        }

        // Init Load
        getWeather();
    </script>
<script src="https://unpkg.com/lenis@1.0.45/dist/lenis.min.js"></script>

<script>
    // Smooth scrolling for demos
    const lenis = new Lenis({
      duration: 1.2,
      easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),
      direction: 'vertical',
      gestureDirection: 'vertical',
      smooth: true,
      mouseMultiplier: 0.8,
      smoothTouch: false,
      touchMultiplier: 2,
    });

    function raf(time) {
      lenis.raf(time);
      requestAnimationFrame(raf);
    }

    requestAnimationFrame(raf);
</script>

</body>
</html>